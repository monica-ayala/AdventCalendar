import{j as e,r as u,R as L,S as A}from"./index-KGXjtEFE.js";const N=({letter:t,status:l})=>{let r={border:"1px solid black",display:"flex",justifyContent:"center",alignItems:"center",margin:"2px",fontSize:"40px",fontWeight:"bold"};switch(l){case"correct":r.backgroundColor="green",r.color="white";break;case"incorrect":r.backgroundColor="grey",r.color="white";break;case"misplaced":r.backgroundColor="orange",r.color="black";break;default:r.backgroundColor="#f0f0f0",r.color="black"}return e.jsx("div",{style:{...r,width:window.innerWidth>=1024?"80px":"30px",height:window.innerWidth>=1024?"80px":"30px"},children:t})},x=({letters:t,statuses:l})=>e.jsx("div",{className:"row",style:{display:"flex"},children:t.map((r,o)=>e.jsx(N,{letter:r,status:l[o]},o))}),F=({attempts:t,statusFeedback:l})=>e.jsx("div",{children:t.map((r,o)=>e.jsx(x,{letters:r,statuses:l[o]},o))}),R=({targetWord:t,oldAttempts:l,isWon:r,day:o})=>{const[i,m]=u.useState(""),[n,p]=u.useState([]),[d,h]=u.useState(6),[s,f]=u.useState([]),[w,C]=u.useState(r||!1),v=L.useContext(A),S=a=>{m(a.target.value)},g=async()=>{if(o!=null&&o.id){const{error:a}=await v.from("gifts").upsert([{id:o.id,guess1:n[0]?n[0].join(""):"raclette",status1:s[0]?s[0]:"{}",guess2:n[1]?n[1].join(""):"",status2:s[1]?s[1]:"{}",guess3:n[2]?n[2].join(""):"",status3:s[2]?s[2]:"{}",guess4:n[3]?n[3].join(""):"",status4:s[3]?s[3]:"{}",guess5:n[4]?n[4].join(""):"",status5:s[4]?s[4]:"{}",guess6:n[5]?n[5].join(""):"",status6:s[5]?s[5]:"{}",status:"Claimed"}],{onConflict:["id"]});a&&console.error(a),C(!0)}},k=()=>{if(i.length!==t.length){alert(`You must enter a ${t.length} letter word.`);return}if(d<=0){alert("You have reached the maximum number of attempts."),g();return}if(i.toLowerCase()===t.toLowerCase())f([...s,Array(t.length).fill("correct")]),p([...n,i.split("")]),h(d-1),alert("Congratulations, you won!"),console.log(s),g();else{const a=t.split("").map((c,y)=>{var b;const j=(b=i[y])==null?void 0:b.toLowerCase();return c.toLowerCase()===j?"correct":t.toLowerCase().includes(j||"")?"misplaced":"incorrect"});p([...n,i.split("")]),f([...s,a]),h(d-1)}m("")};return e.jsxs("div",{className:"flex flex-col items-center justify-center p-10",children:[l.length>0?e.jsx("div",{children:l.map((a,c)=>e.jsx(e.Fragment,{children:e.jsx(x,{letters:a.letters,statuses:a.statuses},c)}))}):e.jsxs(e.Fragment,{children:["   ",e.jsx(F,{attempts:n,statusFeedback:s}),[...Array(d)].map((a,c)=>e.jsx(x,{letters:Array(t.length).fill(" "),statuses:Array(t.length).fill("incorrect")},`empty-${c}`))]}),!w&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",maxLength:t.length,value:i,onChange:S,className:"mt-4 p-2 border border-gray-300 rounded"}),e.jsx("button",{onClick:k,className:"mt-2 p-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Adivina"})]})]})},G=R,I=({day:t})=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-20",children:[e.jsx("div",{className:"font-bold text-red-800 text-3xl mb-5",children:" Querido Antonio, "}),e.jsxs("div",{className:"text-2xl font-cursive",children:[t.letterDescription," ",e.jsx("span",{className:"font-bold",children:" Con amor, Moni â™¡ "})]})]}),E=I;export{E as L,G as W};
